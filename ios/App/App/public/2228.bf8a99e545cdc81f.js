"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2228],{2228:(y,p,s)=>{s.r(p),s.d(p,{TasksAdminPageModule:()=>j});var g=s(1368),f=s(4716),r=s(9548),m=s(8424),P=s(4548),u=s(1528),h=s(812),t=s(4496),b=s(3492),k=s(9448);function C(e,c){if(1&e){const i=t.KQA();t.I0R(0,"div",14)(1,"p",15),t.OEk(2,"No projects yet? Let's get started!"),t.C$Y(),t.I0R(3,"ion-button",16),t.qCj("click",function(){t.usT(i);const o=t.GaO();return t.CGJ(o.goToAdminHomepage())}),t.OEk(4," Click here to go to the homepage "),t.C$Y()()}}function _(e,c){if(1&e){const i=t.KQA();t.I0R(0,"ion-card",19)(1,"div",20)(2,"ion-card-content",21)(3,"span",22),t.OEk(4),t.C$Y(),t.I0R(5,"ion-card-title")(6,"span",23),t.OEk(7),t.C$Y()()(),t.I0R(8,"div",24),t.wR5(9,"ion-progress-bar",25),t.I0R(10,"ion-button",26),t.qCj("click",function(){const a=t.usT(i).$implicit,l=t.GaO(2);return t.CGJ(l.openProjectDetailsModal(a.id))}),t.wR5(11,"ion-icon",27),t.C$Y()()()()}if(2&e){const i=c.$implicit,n=t.GaO(2);t.yG2(4),t.oRS(" ",n.daysUntilDeadline(i.deadline)," days left "),t.yG2(3),t.cNF(i.projectName),t.yG2(2),t.E7m("value",n.completionRates[i.id]/100)}}function v(e,c){if(1&e&&(t.I0R(0,"div",17),t.yuY(1,_,12,3,"ion-card",18),t.C$Y()),2&e){const i=t.GaO();t.yG2(),t.E7m("ngForOf",i.projects)}}const M=[{path:"",component:(()=>{var e;class c{constructor(n,o,a,l,d){this.router=n,this.modalController=o,this.toastController=a,this.projectService=l,this.taskService=d,this.projects=[],this.completionRates={},this.tasksMap={},this.tasks=[]}loadProjects(){this.projectService.getUserProjects().subscribe({next:n=>{this.projects=n,n.forEach(o=>{this.calculateProjectCompletion(o.id),this.loadTasksForProject(o.id)})},error:n=>console.error("Failed to load projects",n)})}loadTasksForProject(n){this.taskService.getAllTasksByProjectAdmin(n).subscribe({next:o=>{this.tasksMap[n]=o},error:o=>console.error(`Failed to load tasks for project ${n}`,o)})}calculateProjectCompletion(n){this.taskService.getAllTasksByProjectAdmin(n).subscribe({next:o=>{const a=o.length,l=o.filter(d=>"completed"===d.status).length;this.completionRates[n]=a>0?l/a*100:0,console.log(`Completion rate for ${n}: ${this.completionRates[n]}%`)},error:o=>{console.error(`Failed to load tasks for project ${n}`,o),this.completionRates[n]=0}})}daysUntilDeadline(n){const o=new Date(n),a=new Date,l=o.getTime()-a.getTime();return Math.ceil(l/864e5)}openProjectDetailsModal(n){var o=this;return(0,u.c)(function*(){try{const a=yield o.projectService.getProjectById(n).toPromise();yield(yield o.modalController.create({component:h.a,componentProps:{project:a,onModalDismiss:()=>o.loadProjects()}})).present()}catch(a){console.error("Error fetching project details",a),o.showToast("Failed to open project details. Please try again later.")}})()}showToast(n){var o=this;return(0,u.c)(function*(){(yield o.toastController.create({message:n,duration:3e3,position:"bottom"})).present()})()}goToSettingsAdmin(){this.router.navigateByUrl("/settings-admin")}goToTasksAdmin(){this.router.navigateByUrl("/tasks-admin")}goToAdminHomepage(){this.router.navigateByUrl("/admin-homepage")}ngOnInit(){this.loadProjects()}}return(e=c).\u0275fac=function(n){return new(n||e)(t.GI1(m.E5),t.GI1(r.qS),t.GI1(r.Gq),t.GI1(b.U),t.GI1(k.K))},e.\u0275cmp=t.In1({type:e,selectors:[["app-tasks"]],decls:28,vars:5,consts:[[3,"translucent"],["size","large",2,"font-size","24px","margin-left","20px"],[3,"fullscreen"],["collapse","condense"],["size","large"],["class","no-projects-container ion-text-center",4,"ngIf"],["class","card-container",4,"ngIf"],["slot","bottom"],["tab","tasks",3,"click"],["name","hourglass-outline"],["tab","admin-homepage",3,"click"],["name","home"],["tab","settings",3,"click"],["name","settings"],[1,"no-projects-container","ion-text-center"],[1,"no-projects-text"],["fill","clear","size","small","slot","icon-only","name","add-outline",1,"add-project-button",3,"click"],[1,"card-container"],["class","projects",4,"ngFor","ngForOf"],[1,"projects"],[1,"projects-buttons","bussiness"],[1,"card-content"],[1,"task-count"],[1,"projects-name"],[1,"progress-container"],["mode","ios",3,"value"],["fill","clear",1,"corner-button",3,"click"],["name","chevron-forward-outline"]],template:function(n,o){1&n&&(t.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),t.OEk(3,"All Your Projects"),t.C$Y()()(),t.I0R(4,"ion-content",2)(5,"ion-header",3)(6,"ion-toolbar")(7,"ion-title",4),t.OEk(8,"Projects"),t.C$Y()()(),t.I0R(9,"ion-content",2),t.yuY(10,C,5,0,"div",5)(11,v,2,1,"div",6),t.C$Y(),t.I0R(12,"ion-footer")(13,"ion-toolbar")(14,"ion-tabs")(15,"ion-tab-bar",7)(16,"ion-tab-button",8),t.qCj("click",function(){return o.goToTasksAdmin()}),t.wR5(17,"ion-icon",9),t.I0R(18,"ion-label"),t.OEk(19,"Projects"),t.C$Y()(),t.I0R(20,"ion-tab-button",10),t.qCj("click",function(){return o.goToAdminHomepage()}),t.wR5(21,"ion-icon",11),t.I0R(22,"ion-label"),t.OEk(23,"Home"),t.C$Y()(),t.I0R(24,"ion-tab-button",12),t.qCj("click",function(){return o.goToSettingsAdmin()}),t.wR5(25,"ion-icon",13),t.I0R(26,"ion-label"),t.OEk(27,"Settings"),t.C$Y()()()()()()()),2&n&&(t.E7m("translucent",!0),t.yG2(4),t.E7m("fullscreen",!0),t.yG2(5),t.E7m("fullscreen",!0),t.yG2(),t.E7m("ngIf",0===o.projects.length),t.yG2(),t.E7m("ngIf",o.projects.length>0))},dependencies:[g.ay,g.u_,r.sn,r.KC,r.Gg,r.I7,r._i,r.eV,r.wB,r.Ko,r.QR,r.WU,r.mx,r.ej,r.tM,r.Md,r.CE],styles:['@charset "UTF-8";.title-black[_ngcontent-%COMP%]{color:#000}ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-background-color, --td-bg)}ion-toolbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-weight:lighter;color:var(--ion-secondary-text-color);font-size:1.66rem}.no-projects-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}ion-content[_ngcontent-%COMP%]{--background: var(--ion-background-color, --td-bg)}#container[_ngcontent-%COMP%]{padding:3rem 0rem;padding-top:1.5vh}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:xx-large;padding-left:1.2rem;letter-spacing:.5px}.sub-header[_ngcontent-%COMP%], .todays-header[_ngcontent-%COMP%]{text-transform:uppercase;display:block;margin-left:1.2rem;margin-top:4vh;font-size:medium;letter-spacing:.5px;color:var(--ion-secondary-text-color)}.todays-header[_ngcontent-%COMP%]{margin-top:2vh;margin-bottom:3vh}ion-tab-bar[_ngcontent-%COMP%]{--background: #ffffff;--color-selected: #488aff;--color: grey;--mode: ios;padding-top:5px;border-top:1px solid #e0e0e0}.fab-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;padding:10px 0;flex-direction:column;margin-top:20px}.text-below-fab[_ngcontent-%COMP%]{text-align:center;padding:10px 0;text-transform:uppercase;letter-spacing:.5px;color:var(--ion-secondary-text-color)}.projects-name[_ngcontent-%COMP%]{color:#243158;font-size:large;font-weight:600}.projects-buttons[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:1.8rem 1rem 1.1rem;margin:1rem 1rem 1.4rem;margin-right:0;border-radius:1.4rem;font-size:larger;color:var(--ion-color-secondary-contrast);background-color:var(--ion-card-background);text-align:left}.projects-buttons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .projects-buttons[_ngcontent-%COMP%]   .bx-envelope[_ngcontent-%COMP%]{font-size:xx-large}.projects-buttons[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{margin-top:.6rem;--background: var(--ion-progressbar)}.projects-buttons[_ngcontent-%COMP%]   .task-count[_ngcontent-%COMP%]{color:var(--ion-secondary-text-color);font-size:small}.projects-buttons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:.7rem}.business[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{--progress-background: var(--td-blue)}.progress-container[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}ion-progress-bar[_ngcontent-%COMP%]{flex-grow:0;width:90%;margin-right:10px}.card-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:16px;width:100%}ion-card[_ngcontent-%COMP%]{width:100%}.card-container[_ngcontent-%COMP%]{width:100%}@media (min-width: 992px){.card-container[_ngcontent-%COMP%]{width:65%;margin-right:40%}}ion-footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%}']}),c})(),canActivate:[P.o]}];let T=(()=>{var e;class c{}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.a4G({type:e}),e.\u0275inj=t.s3X({imports:[m.qQ.forChild(M),m.qQ]}),c})(),j=(()=>{var e;class c{}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.a4G({type:e}),e.\u0275inj=t.s3X({imports:[g.MD,f.y,r.wZ,T]}),c})()}}]);