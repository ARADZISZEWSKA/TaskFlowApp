"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7384],{4820:(M,p,c)=>{c.r(p),c.d(p,{ManageUsersPageModule:()=>G});var m=c(1368),g=c(4716),t=c(9548),_=c(8424),u=c(1528),e=c(4496),h=c(628);let d=(()=>{var i;class l{constructor(o,n){this.userService=o,this.modalController=n,this.user={firstName:"",lastName:"",email:"",role:"",password:"",tasks:[]}}saveButton(){this.modalController.dismiss({success:!0},"confirm"),this.saveChanges()}saveChanges(){const o={};""!==this.user.firstName&&(o.firstName=this.user.firstName),""!==this.user.lastName&&(o.lastName=this.user.lastName),""!==this.user.email&&(o.email=this.user.email),""!==this.user.role&&(o.role=this.user.role),o.password="",o.Tasks=[],this.userService.updateUser(this.id,o).subscribe({next:()=>{console.log("User updated successfully."),this.modalController.dismiss({success:!0}),this.onModalDismiss()},error:n=>{console.error("Error updating user:",n)}})}cancel(){this.modalController.dismiss(null,"cancel"),this.onModalDismiss()}}return(i=l).\u0275fac=function(o){return new(o||i)(e.GI1(h.o),e.GI1(t.qS))},i.\u0275cmp=e.In1({type:i,selectors:[["app-edit-user-modal"]],inputs:{id:"id",onModalDismiss:"onModalDismiss"},decls:40,vars:4,consts:[["slot","start"],["color","primary",3,"click"],["name","chevron-back-outline"],["justify-content-center","","align-items-center","",2,"height","20vh"],["size","12",1,"ion-text-center"],["aria-hidden","true",1,"avatar-centered"],["src","https://ionicframework.com/docs/img/demos/avatar.svg","alt","Avatar"],["size","12"],["lines","none"],[1,"custom-label"],["placeholder","Enter new first name",3,"ngModel","ngModelChange"],["placeholder","Last Name",3,"ngModel","ngModelChange"],["type","email","placeholder","Email",3,"ngModel","ngModelChange"],["placeholder","Select Role","interface","popover",3,"ngModel","ngModelChange"],["value","admin"],["value","user"],[1,"ion-padding"],["expand","block","color","primary",3,"click"]],template:function(o,n){1&o&&(e.I0R(0,"ion-toolbar")(1,"ion-buttons",0)(2,"ion-button",1),e.qCj("click",function(){return n.cancel()}),e.wR5(3,"ion-icon",2),e.C$Y()(),e.I0R(4,"ion-title"),e.OEk(5,"Edit User"),e.C$Y()(),e.I0R(6,"ion-content")(7,"ion-grid")(8,"ion-row",3)(9,"ion-col",4)(10,"ion-avatar",5),e.wR5(11,"img",6),e.C$Y()()(),e.I0R(12,"ion-row")(13,"ion-col",7)(14,"ion-item",8)(15,"ion-label",9),e.OEk(16," First Name "),e.C$Y(),e.I0R(17,"ion-input",10),e.iHE("ngModelChange",function(a){return e.kNx(n.user.firstName,a)||(n.user.firstName=a),a}),e.C$Y()()(),e.I0R(18,"ion-col",7)(19,"ion-item",8)(20,"ion-label",9),e.OEk(21," Last Name "),e.C$Y(),e.I0R(22,"ion-input",11),e.iHE("ngModelChange",function(a){return e.kNx(n.user.lastName,a)||(n.user.lastName=a),a}),e.C$Y()()(),e.I0R(23,"ion-col",7)(24,"ion-item",8)(25,"ion-label",9),e.OEk(26," Email "),e.C$Y(),e.I0R(27,"ion-input",12),e.iHE("ngModelChange",function(a){return e.kNx(n.user.email,a)||(n.user.email=a),a}),e.C$Y()()(),e.I0R(28,"ion-col",7)(29,"ion-item",8)(30,"ion-label",9),e.OEk(31," Role "),e.C$Y(),e.I0R(32,"ion-select",13),e.iHE("ngModelChange",function(a){return e.kNx(n.user.role,a)||(n.user.role=a),a}),e.I0R(33,"ion-select-option",14),e.OEk(34,"Admin"),e.C$Y(),e.I0R(35,"ion-select-option",15),e.OEk(36,"User"),e.C$Y()()()()()(),e.I0R(37,"div",16)(38,"ion-button",17),e.qCj("click",function(){return n.saveButton()}),e.OEk(39,"Save Changes"),e.C$Y()()()),2&o&&(e.yG2(17),e.OKB("ngModel",n.user.firstName),e.yG2(5),e.OKB("ngModel",n.user.lastName),e.yG2(5),e.OKB("ngModel",n.user.email),e.yG2(5),e.OKB("ngModel",n.user.role))},dependencies:[g.ue,g._G,t.O7,t.sn,t.GS,t.Kk,t._i,t.YP,t.Ko,t.A5,t.Yb,t.QR,t.qo,t.Cy,t.gd,t.tM,t.Md,t.IT,t.qG],styles:[".custom-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;width:30%;text-align:left}.avatar-centered[_ngcontent-%COMP%]{display:inline-block;margin-top:5vh;margin-bottom:5vh}"]}),l})();var C=c(3696),b=c(9240);function U(i,l){1&i&&(e.I0R(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.OEk(3," Manage Users "),e.C$Y()()())}function I(i,l){1&i&&(e.I0R(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.OEk(3," Manage Users "),e.C$Y(),e.I0R(4,"ion-buttons",8)(5,"ion-button",9),e.wR5(6,"ion-icon",10),e.I0R(7,"ion-label"),e.OEk(8,"Add New User"),e.C$Y()()()()())}function k(i,l){if(1&i){const s=e.KQA();e.I0R(0,"ion-row")(1,"ion-col",12),e.OEk(2),e.C$Y(),e.I0R(3,"ion-col",13),e.OEk(4),e.C$Y(),e.I0R(5,"ion-col",13),e.OEk(6),e.C$Y(),e.I0R(7,"ion-col",14),e.OEk(8),e.C$Y(),e.I0R(9,"ion-col")(10,"ion-button",20),e.qCj("click",function(){const r=e.usT(s).$implicit,a=e.GaO(2);return e.CGJ(a.openEditUserModal(r))}),e.OEk(11,"Edit"),e.C$Y()(),e.I0R(12,"ion-col",13)(13,"ion-button",21),e.qCj("click",function(){const r=e.usT(s).$implicit,a=e.GaO(2);return e.CGJ(a.deleteUser(r.id))}),e.OEk(14,"Delete"),e.C$Y()()()}if(2&i){const s=l.$implicit,o=l.index;e.yG2(2),e.cNF(o+1),e.yG2(2),e.cNF(s.firstName),e.yG2(2),e.cNF(s.lastName),e.yG2(2),e.cNF(s.email)}}function E(i,l){if(1&i){const s=e.KQA();e.I0R(0,"ion-content")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e.OEk(4," Your Users "),e.C$Y()(),e.I0R(5,"ion-card-content")(6,"ion-searchbar",11),e.iHE("ngModelChange",function(n){e.usT(s);const r=e.GaO();return e.kNx(r.searchTerm,n)||(r.searchTerm=n),e.CGJ(n)}),e.qCj("ionInput",function(n){e.usT(s);const r=e.GaO();return e.CGJ(r.filterUsers(n))}),e.C$Y(),e.I0R(7,"ion-grid")(8,"ion-row")(9,"ion-col",12),e.OEk(10,"Nr."),e.C$Y(),e.I0R(11,"ion-col",13),e.OEk(12,"Imi\u0119"),e.C$Y(),e.I0R(13,"ion-col",13),e.OEk(14,"Nazwisko"),e.C$Y(),e.I0R(15,"ion-col",14),e.OEk(16,"Email"),e.C$Y(),e.I0R(17,"ion-col",12),e.OEk(18,"Edit"),e.C$Y(),e.I0R(19,"ion-col",13),e.OEk(20,"Delete"),e.C$Y()(),e.yuY(21,k,15,4,"ion-row",15),e.C$Y()()(),e.I0R(22,"div",16)(23,"ion-fab",17)(24,"ion-fab-button",18),e.qCj("click",function(){e.usT(s);const n=e.GaO();return e.CGJ(n.openRegisterUserModal())}),e.wR5(25,"ion-icon",19),e.C$Y()()()()}if(2&i){const s=e.GaO();e.yG2(6),e.OKB("ngModel",s.searchTerm),e.yG2(15),e.E7m("ngForOf",s.filteredUsers)}}function O(i,l){if(1&i){const s=e.KQA();e.I0R(0,"ion-card",23)(1,"ion-card-content",24)(2,"ion-grid")(3,"ion-row")(4,"ion-col",25)(5,"strong",26),e.OEk(6),e.C$Y()(),e.I0R(7,"ion-col",27)(8,"ion-button",28),e.qCj("click",function(){const r=e.usT(s).$implicit,a=e.GaO(2);return e.CGJ(a.openEditUserModal(r))}),e.wR5(9,"ion-icon",29),e.C$Y()(),e.I0R(10,"ion-col",27)(11,"ion-button",30),e.qCj("click",function(){const r=e.usT(s).$implicit,a=e.GaO(2);return e.CGJ(a.deleteUser(r.id))}),e.wR5(12,"ion-icon",31),e.C$Y()()()()()()}if(2&i){const s=l.$implicit;e.yG2(6),e.CAO("",s.firstName," ",s.lastName,"")}}function R(i,l){if(1&i){const s=e.KQA();e.I0R(0,"ion-content")(1,"ion-searchbar",11),e.iHE("ngModelChange",function(n){e.usT(s);const r=e.GaO();return e.kNx(r.searchTerm,n)||(r.searchTerm=n),e.CGJ(n)}),e.qCj("ionInput",function(n){e.usT(s);const r=e.GaO();return e.CGJ(r.filterUsers(n))}),e.C$Y(),e.yuY(2,O,13,2,"ion-card",22),e.C$Y()}if(2&i){const s=e.GaO();e.yG2(),e.OKB("ngModel",s.searchTerm),e.yG2(),e.E7m("ngForOf",s.filteredUsers)}}const y=[{path:"",component:(()=>{var i;class l{constructor(o,n,r,a,f){this.userService=o,this.platform=n,this.router=r,this.toastController=a,this.modalController=f,this.users=[],this.filteredUsers=[],this.searchTerm="",this.isMobile=!1,this.isMobile=this.platform.is("mobile")}ngOnInit(){this.userService.getUsersByOwner().subscribe(o=>{this.users=o,this.filteredUsers=o,this.isMobile=window.innerWidth<=768}),this.loadUsers()}loadUsers(){this.userService.getUsersByOwner().subscribe(o=>{this.users=o,this.filteredUsers=o})}filterUsers(o){const n=o.target.value.toLowerCase();this.filteredUsers=this.users.filter(r=>r.firstName.toLowerCase().includes(n)||r.lastName.toLowerCase().includes(n)||r.email.toLowerCase().includes(n))}deleteUser(o){o?this.userService.deleteUser(o).subscribe({next:()=>{console.log("User deleted"),this.presentToast("User deleted successfully"),this.loadUsers()},error:n=>{console.error("Error deleting user:",n)}}):console.error("User ID is required")}openEditUserModal(o){var n=this;return(0,u.c)(function*(){const r=yield n.modalController.create({component:d,componentProps:{id:o.id,onModalDismiss:()=>n.loadUsers()}});yield r.present();const{data:a,role:f}=yield r.onWillDismiss();"confirm"===f&&null!=a&&a.success&&n.loadUsers()})()}openRegisterUserModal(){var o=this;return(0,u.c)(function*(){return yield(yield o.modalController.create({component:C.G})).present()})()}presentToast(o){var n=this;return(0,u.c)(function*(){(yield n.toastController.create({message:o,duration:2e3})).present()})()}goToSettingsAdmin(){this.router.navigateByUrl("/settings-admin")}goToTasksAdmin(){this.router.navigateByUrl("/tasks-admin")}goToAdminHomepage(){this.router.navigateByUrl("/admin-homepage")}}return(i=l).\u0275fac=function(o){return new(o||i)(e.GI1(h.o),e.GI1(b.WU),e.GI1(_.E5),e.GI1(t.Gq),e.GI1(t.qS))},i.\u0275cmp=e.In1({type:i,selectors:[["app-manage-users"]],decls:20,vars:4,consts:[[4,"ngIf"],["slot","bottom"],["tab","tasks",3,"click"],["name","hourglass-outline"],["tab","admin-homepage",3,"click"],["name","home"],["tab","settings",3,"click"],["name","settings"],["slot","end"],["id","popover-button"],["name","add-outline"],[3,"ngModel","ngModelChange","ionInput"],["size","1"],["size","2"],["size","4"],[4,"ngFor","ngForOf"],[1,"fab-container"],["vertical","center","horizontal","center"],["mode","ios",1,"addUser-button",3,"click"],["name","add"],["size","small",3,"click"],["size","small","color","danger",3,"click"],["style","margin-bottom: 10px; border: none;",4,"ngFor","ngForOf"],[2,"margin-bottom","10px","border","none"],[2,"padding","8px"],["size","8",1,"data-col-mobile",2,"text-align","center"],[2,"font-size","18px","font-weight","bold","color","black"],["size","2",2,"text-align","center"],["size","small","color","primary",2,"padding","0",3,"click"],["name","create-outline",2,"font-size","16px"],["size","small","color","danger",2,"padding","0",3,"click"],["name","trash-outline",2,"font-size","16px"]],template:function(o,n){1&o&&(e.yuY(0,U,4,0,"ion-header",0)(1,I,9,0,"ion-header",0)(2,E,26,2,"ion-content",0)(3,R,3,2,"ion-content",0),e.I0R(4,"ion-footer")(5,"ion-toolbar")(6,"ion-tabs")(7,"ion-tab-bar",1)(8,"ion-tab-button",2),e.qCj("click",function(){return n.goToTasksAdmin()}),e.wR5(9,"ion-icon",3),e.I0R(10,"ion-label"),e.OEk(11,"Projects"),e.C$Y()(),e.I0R(12,"ion-tab-button",4),e.qCj("click",function(){return n.goToAdminHomepage()}),e.wR5(13,"ion-icon",5),e.I0R(14,"ion-label"),e.OEk(15,"Home"),e.C$Y()(),e.I0R(16,"ion-tab-button",6),e.qCj("click",function(){return n.goToSettingsAdmin()}),e.wR5(17,"ion-icon",7),e.I0R(18,"ion-label"),e.OEk(19,"Settings"),e.C$Y()()()()()()),2&o&&(e.E7m("ngIf",!n.isMobile),e.yG2(),e.E7m("ngIf",n.isMobile),e.yG2(),e.E7m("ngIf",!n.isMobile),e.yG2(),e.E7m("ngIf",n.isMobile))},dependencies:[m.ay,m.u_,g.ue,g._G,t.sn,t.GS,t.KC,t.Gg,t.YY,t.I7,t.Kk,t._i,t.q8,t.Wq,t.eV,t.YP,t.wB,t.Ko,t.QR,t.qo,t.KQ,t.mx,t.ej,t.tM,t.Md,t.qG,t.CE],styles:["ion-title[_ngcontent-%COMP%]{color:#000;font-size:24px;margin-left:20px}ion-searchbar[_ngcontent-%COMP%]{--placeholder-color: #333;padding:10px}ion-card[_ngcontent-%COMP%]{max-width:80%;margin:20px auto}ion-card-title[_ngcontent-%COMP%]{text-align:center;color:#000;padding:30px}ion-col[_ngcontent-%COMP%]{border:1px solid #ccc;text-align:center;--ion-text-wrap: normal}.addUser-button[_ngcontent-%COMP%]{position:fixed;bottom:80px;right:20px;font-size:x-large}.header-col[_ngcontent-%COMP%]{color:#000}.data-col[_ngcontent-%COMP%]{border:1px solid #ccc;text-align:center}.data-col-mobile[_ngcontent-%COMP%]{text-align:center}ion-tab-bar[_ngcontent-%COMP%]{--background: #ffffff;--color-selected: #488aff;--color: grey;--mode: ios;padding-top:5px;border-top:1px solid #e0e0e0}"]}),l})()}];let T=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.a4G({type:i}),i.\u0275inj=e.s3X({imports:[_.qQ.forChild(y),_.qQ]}),l})(),G=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.a4G({type:i}),i.\u0275inj=e.s3X({imports:[m.MD,g.y,t.wZ,T]}),l})()},5359:(M,p,c)=>{c.d(p,{o:()=>_});var m=c(9212),g=c(4496),t=c(7048);let _=(()=>{var u;class e{constructor(d){this.http=d,this.baseUrl="https://taskflowapp.azurewebsites.net"}register(d){return this.http.post(`${this.baseUrl}/user/register`,d,{withCredentials:!0})}registerByAdmin(d){return this.http.post(`${this.baseUrl}/user/registerByAdmin`,d,{withCredentials:!0})}login(d){return this.http.post(`${this.baseUrl}/user/login`,d,{withCredentials:!0}).pipe((0,m.y)(C=>{localStorage.setItem("username",C.firstName),localStorage.setItem("role",C.role)}))}logout(){return this.http.post(`${this.baseUrl}/user/logout`,{},{withCredentials:!0}).pipe((0,m.y)(()=>{localStorage.removeItem("username"),localStorage.removeItem("role")}))}isLoggedIn(){return!!localStorage.getItem("username")}isUserAdmin(){return"admin"===localStorage.getItem("role")}}return(u=e).\u0275fac=function(d){return new(d||u)(g.CoB(t.KK))},u.\u0275prov=g.wxM({token:u,factory:u.\u0275fac,providedIn:"root"}),e})()}}]);