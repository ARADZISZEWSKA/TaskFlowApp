"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[168],{168:(v,p,o)=>{o.r(p),o.d(p,{LoginPageModule:()=>M});var m=o(1368),u=o(4716),r=o(9548),h=o(8424),s=o(1528),f=o(2724),e=o(4496),a=o(5359);const C=[{path:"",component:(()=>{var t;class g{constructor(i,n,l){this.authService=i,this.router=n,this.alertController=l,this.user=new f.i,this.loginError=""}login(){var i=this;this.authService.login(this.user).subscribe(n=>{console.log(n);const l=n.role;localStorage.setItem("role",l),this.router.navigateByUrl("admin"===l?"/admin-homepage":"/home")},function(){var n=(0,s.c)(function*(l){console.error(l),i.loginError="Login failed. Please check your credentials.",yield(yield i.alertController.create({header:"Login Error",message:i.loginError,buttons:["OK"]})).present()});return function(l){return n.apply(this,arguments)}}())}goToRegister(){this.router.navigateByUrl("/register")}}return(t=g).\u0275fac=function(i){return new(i||t)(e.GI1(a.o),e.GI1(h.E5),e.GI1(r.iW))},t.\u0275cmp=e.In1({type:t,selectors:[["app-login"]],decls:24,vars:3,consts:[[3,"fullscreen"],[1,"flex-center"],["shape","round"],[1,"login-header"],[2,"display","block","text-align","center","padding","0 20px"],[1,"ion-padding-top"],["color","",1,"ion-padding-top"],["color","primary-tint"],["type","email","label","Email","labelPlacement","floating","placeholder","",3,"ngModel","ngModelChange"],["type","password","label","Password","labelPlacement","floating","placeholder","",3,"ngModel","ngModelChange"],["fill","clear","size","small",2,"text-transform","initial"],["expand","block","shape","round","color","tertiary",3,"click"],["fill","clear","expand","block","shape","round","color","tertiary",1,"ion-margin-top",3,"click"]],template:function(i,n){1&i&&(e.I0R(0,"ion-content",0)(1,"div",1)(2,"ion-card",2)(3,"ion-card-content")(4,"ion-card-header")(5,"div",3)(6,"div",4)(7,"ion-card-title",5),e.OEk(8," Welcome in TaskFlow App! "),e.C$Y(),e.I0R(9,"ion-text",6),e.OEk(10," We are very excited to have you join the "),e.I0R(11,"ion-text",7),e.OEk(12,"family"),e.C$Y()()()()(),e.I0R(13,"ion-card-content")(14,"ion-item")(15,"ion-input",8),e.iHE("ngModelChange",function(c){return e.kNx(n.user.email,c)||(n.user.email=c),c}),e.C$Y()(),e.I0R(16,"ion-item")(17,"ion-input",9),e.iHE("ngModelChange",function(c){return e.kNx(n.user.password,c)||(n.user.password=c),c}),e.C$Y()()(),e.I0R(18,"ion-button",10),e.OEk(19,"Recovery password"),e.C$Y(),e.I0R(20,"ion-button",11),e.qCj("click",function(){return n.login()}),e.OEk(21,"Login"),e.C$Y(),e.I0R(22,"ion-button",12),e.qCj("click",function(){return n.goToRegister()}),e.OEk(23,"Register"),e.C$Y()()()()()),2&i&&(e.E7m("fullscreen",!0),e.yG2(15),e.OKB("ngModel",n.user.email),e.yG2(2),e.OKB("ngModel",n.user.password))},dependencies:[u.ue,u._G,r.sn,r.KC,r.Gg,r.YY,r.I7,r._i,r.A5,r.Yb,r.Wg,r.qG],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{margin:0}.login-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}.flex-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}ion-content[_ngcontent-%COMP%]{width:100%;height:100%;--background: url(blobniebieski.a411efe3b393c76b.svg) no-repeat center center / cover}']}),g})()}];let P=(()=>{var t;class g{}return(t=g).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[h.qQ.forChild(C),h.qQ]}),g})(),M=(()=>{var t;class g{}return(t=g).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[m.MD,u.y,r.wZ,P]}),g})()},5359:(v,p,o)=>{o.d(p,{o:()=>h});var m=o(9212),u=o(4496),r=o(7048);let h=(()=>{var s;class f{constructor(a){this.http=a,this.baseUrl="https://taskflowapp.azurewebsites.net"}register(a){return this.http.post(`${this.baseUrl}/user/register`,a,{withCredentials:!0})}registerByAdmin(a){return this.http.post(`${this.baseUrl}/user/registerByAdmin`,a,{withCredentials:!0})}login(a){return this.http.post(`${this.baseUrl}/user/login`,a,{withCredentials:!0}).pipe((0,m.y)(y=>{localStorage.setItem("username",y.firstName),localStorage.setItem("role",y.role)}))}logout(){return this.http.post(`${this.baseUrl}/user/logout`,{},{withCredentials:!0}).pipe((0,m.y)(()=>{localStorage.removeItem("username"),localStorage.removeItem("role")}))}isLoggedIn(){return!!localStorage.getItem("username")}isUserAdmin(){return"admin"===localStorage.getItem("role")}}return(s=f).\u0275fac=function(a){return new(a||s)(u.CoB(r.KK))},s.\u0275prov=u.wxM({token:s,factory:s.\u0275fac,providedIn:"root"}),f})()}}]);