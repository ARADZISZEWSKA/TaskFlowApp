"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3684],{9460:(P,_,i)=>{i.r(_),i.d(_,{HomePageModule:()=>U});var u=i(1368),r=i(9548),f=i(4716),d=i(3124),g=i(8424),b=i(1528),o=i(4708),s=i(1800),p=i(2200),t=i(4496),v=i(3492),M=i(9448);const k=a=>({"completed-task":a});function y(a,m){if(1&a){const l=t.KQA();t.I0R(0,"ion-accordion",28)(1,"ion-item",29)(2,"ion-checkbox",30),t.qCj("click",function(n){const h=t.usT(l).$implicit,C=t.GaO(3);return t.CGJ(C.playCheckboxAnimation(n,h))}),t.C$Y(),t.I0R(3,"ion-label",31),t.OEk(4),t.C$Y()(),t.I0R(5,"div",32)(6,"p"),t.OEk(7),t.C$Y()()()}if(2&a){const l=m.$implicit;t.E7m("value",l.id),t.yG2(2),t.E7m("checked","completed"===l.status),t.yG2(),t.E7m("ngClass",t.S45(5,k,"completed"===l.status)),t.yG2(),t.oRS(" ",l.taskName," "),t.yG2(3),t.cNF(l.description)}}function x(a,m){if(1&a){const l=t.KQA();t.I0R(0,"ion-card",17)(1,"div",18)(2,"div",19)(3,"ion-card-content")(4,"span",20),t.OEk(5),t.C$Y(),t.I0R(6,"ion-card-title")(7,"span",21),t.OEk(8),t.C$Y()()(),t.I0R(9,"div",22),t.wR5(10,"ion-progress-bar",23),t.I0R(11,"ion-button",24),t.qCj("click",function(){t.usT(l);const n=t.GaO().$implicit,c=t.GaO();return t.CGJ(c.openProjectDetailsHomeModal(n))}),t.wR5(12,"ion-icon",25),t.I0R(13,"span"),t.OEk(14,"See details"),t.C$Y()()()()()(),t.I0R(15,"ion-list",26)(16,"ion-accordion-group"),t.yuY(17,y,8,7,"ion-accordion",27),t.C$Y()()}if(2&a){const l=t.GaO().$implicit,e=t.GaO();t.yG2(5),t.oRS(" ",e.daysUntilDeadline(l.deadline)," days left "),t.yG2(3),t.cNF(l.projectName),t.yG2(2),t.E7m("value",e.tasksMap[l.id].completionRate/100),t.yG2(7),t.E7m("ngForOf",e.todayTasksMap[l.id])}}function O(a,m){1&a&&t.yuY(0,x,18,4,"ng-template",16)}p.cp.use([p._2,p.eM,p.a1]);const j=[{path:"",component:(()=>{var a;class m{constructor(e,n,c,h,C){this.modalController=e,this.toastController=n,this.router=c,this.projectService=h,this.taskService=C,this.projects=[],this.tasksMap={},this.todayTasksMap={},this.tasks=[],this.sliderConfig={slidesPerView:1,spaceBetween:20,navigation:!0,pagination:{clickable:!0}}}ngOnInit(){this.loadProjects(),this.archiveAndDeleteCompletedTasks(),this.username=localStorage.getItem("username")}archiveAndDeleteCompletedTasks(){this.taskService.archiveAndDeleteCompletedTasks().subscribe({next:e=>{e.success?this.loadProjects():console.error("API succeeded but indicated failure:",e.message)},error:e=>{console.error("Failed to archive and delete tasks:",e.error)}})}loadProjects(){this.projectService.getAssignedProjects().subscribe({next:e=>{this.projects=e,e.forEach(n=>{this.loadTasksForProject(n.id),this.loadTasksDueToday(n.id)})},error:e=>console.error("Failed to load projects",e)})}calculateCompletionRate(e){const n=e.filter(c=>"completed"===c.status).length;return e.length>0?n/e.length*100:0}loadTasksDueToday(e){this.taskService.getTodayTasksByProject(e).subscribe({next:n=>{this.todayTasksMap[e]=n},error:n=>{console.error("Failed to load today's tasks:",n),this.todayTasksMap[e]=[]}})}loadTasksForProject(e){this.taskService.getAllTasksByProject(e).subscribe({next:n=>{const c=n.filter(C=>"completed"===C.status).length;this.tasksMap[e]={tasks:n,completionRate:n.length>0?c/n.length*100:0}},error:n=>{console.error(`Failed to load tasks for project ${e}`,n),this.tasksMap[e]={tasks:[],completionRate:0}}})}playCheckboxAnimation(e,n){console.log(e);const c="completed"===n.status?"not completed":"completed";this.taskService.updateTaskStatus(n.id,c).subscribe({next:()=>{n.status=c,(0,o.U6)("").addElement(e.srcElement).easing("cubic-bezier(0, 0.55, 0.45, 1)").duration(500).fromTo("transform","rotate(0)","rotate(360deg)").play()},error:h=>console.error("Failed to update task status:",h)})}openProjectDetailsHomeModal(e){var n=this;return(0,b.c)(function*(){try{const c=yield n.modalController.create({component:s.k,componentProps:{project:e}});c.onDidDismiss().then(()=>{n.loadProjects()}),yield c.present()}catch(c){console.error("Error opening modal",c),n.showToast("Failed to open project details. Please try again later.")}})()}showToast(e){var n=this;return(0,b.c)(function*(){(yield n.toastController.create({message:e,duration:3e3,position:"bottom"})).present()})()}goToSettingsAdmin(){this.router.navigateByUrl("/settings-admin")}goToTasksAdmin(){this.router.navigateByUrl("/tasks-admin")}goToAdminHomepage(){this.router.navigateByUrl("/admin-homepage")}handleRefresh(e){setTimeout(()=>{this.loadProjects(),e.detail.complete()},1e3)}daysUntilDeadline(e){const n=new Date(e),c=new Date,h=n.getTime()-c.getTime();return Math.ceil(h/864e5)}goToTasksPage(){this.router.navigateByUrl("/tasks-admin")}}return(a=m).\u0275fac=function(e){return new(e||a)(t.GI1(r.qS),t.GI1(r.Gq),t.GI1(g.E5),t.GI1(v.U),t.GI1(M.K))},a.\u0275cmp=t.In1({type:a,selectors:[["app-home"]],decls:32,vars:7,consts:[[3,"fullscreen"],["mode","ios","slot","fixed",3,"pullFactor","pullMin","pullMax","ionRefresh"],["id","container",1,"ion-margin-top"],[1,"sub-header"],[1,"swiper-and-text-container"],[1,"sub-header","todays-tasks-header"],[1,"swiper-container"],[3,"config"],[4,"ngFor","ngForOf"],["slot","bottom"],["tab","tasks",3,"click"],["name","hourglass-outline"],["tab","admin-homepage",3,"click"],["name","home"],["tab","settings",3,"click"],["name","settings"],["swiperSlide","","class","swiper-slide"],[1,"projects"],[1,"card-container"],[1,"projects-buttons","purple"],[1,"task-count"],[1,"projects-name"],[1,"progress-container"],["mode","ios",3,"value"],["fill","clear",1,"corner-button",3,"click"],["name","chevron-forward-outline"],["lines","none"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","header"],["slot","start",3,"checked","click"],[3,"ngClass"],["slot","content",1,"ion-padding"]],template:function(e,n){1&e&&(t.I0R(0,"ion-content",0)(1,"ion-refresher",1),t.qCj("ionRefresh",function(h){return n.handleRefresh(h)}),t.wR5(2,"ion-refresher-content"),t.C$Y(),t.I0R(3,"ion-toolbar")(4,"div",2)(5,"strong"),t.OEk(6),t.C$Y(),t.I0R(7,"span",3),t.OEk(8,"Your projects"),t.C$Y()()(),t.I0R(9,"div",4)(10,"div",5)(11,"span",3),t.OEk(12,"Today's tasks"),t.C$Y()(),t.I0R(13,"div",6)(14,"swiper",7),t.yuY(15,O,1,0,null,8),t.C$Y()()()(),t.I0R(16,"ion-footer")(17,"ion-toolbar")(18,"ion-tabs")(19,"ion-tab-bar",9)(20,"ion-tab-button",10),t.qCj("click",function(){return n.goToTasksAdmin()}),t.wR5(21,"ion-icon",11),t.I0R(22,"ion-label"),t.OEk(23,"Projects"),t.C$Y()(),t.I0R(24,"ion-tab-button",12),t.qCj("click",function(){return n.goToAdminHomepage()}),t.wR5(25,"ion-icon",13),t.I0R(26,"ion-label"),t.OEk(27,"Home"),t.C$Y()(),t.I0R(28,"ion-tab-button",14),t.qCj("click",function(){return n.goToSettingsAdmin()}),t.wR5(29,"ion-icon",15),t.I0R(30,"ion-label"),t.OEk(31,"Settings"),t.C$Y()()()()()()),2&e&&(t.E7m("fullscreen",!0),t.yG2(),t.E7m("pullFactor",.5)("pullMin",100)("pullMax",200),t.yG2(5),t.oRS("What's up, ",n.username,""),t.yG2(8),t.E7m("config",n.sliderConfig),t.yG2(),t.E7m("ngForOf",n.projects))},dependencies:[u.QF,u.ay,r.cm,r.qU,r.sn,r.KC,r.Gg,r.I7,r.ew,r._i,r.eV,r.Ko,r.Yb,r.QR,r.OC,r.WU,r._I,r.Wi,r.mx,r.ej,r.Md,r.UJ,r.CE,d.sx,d.GS],styles:['@charset "UTF-8";ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-background-color, --td-bg)}ion-toolbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-weight:lighter;color:var(--ion-secondary-text-color);font-size:1.66rem}ion-content[_ngcontent-%COMP%]{--background: var(--ion-background-color, --td-bg)}#container[_ngcontent-%COMP%]{padding:1.5rem 0rem;padding-top:1.5vh}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:xx-large;padding-left:1.2rem;letter-spacing:.5px}.sub-header[_ngcontent-%COMP%], .todays-header[_ngcontent-%COMP%]{text-transform:uppercase;display:block;margin-left:1.2rem;margin-top:4vh;font-size:medium;letter-spacing:.5px;color:var(--ion-secondary-text-color)}.todays-header[_ngcontent-%COMP%]{margin-top:2vh;margin-bottom:3vh}ion-tab-bar[_ngcontent-%COMP%]{--background: #ffffff;--color-selected: #488aff;--color: grey;--mode: ios;padding-top:5px;border-top:1px solid #e0e0e0}.fab-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;padding:10px 0;flex-direction:column}.text-below-fab[_ngcontent-%COMP%]{text-align:center;padding:10px 0;text-transform:uppercase;letter-spacing:.5px;color:var(--ion-secondary-text-color)}.projects-name[_ngcontent-%COMP%]{color:#243158;font-size:large;font-weight:600}.projects-buttons[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:1.8rem 1rem 1.1rem;margin:1rem 1rem 1.4rem;margin-right:0;border-radius:1.4rem;font-size:larger;color:var(--ion-color-secondary-contrast);background-color:var(--ion-card-background);text-align:left}.projects-buttons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .projects-buttons[_ngcontent-%COMP%]   .bx-envelope[_ngcontent-%COMP%]{font-size:xx-large}.projects-buttons[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{margin-top:.6rem;--background: var(--ion-progressbar)}.projects-buttons[_ngcontent-%COMP%]   .task-count[_ngcontent-%COMP%]{color:var(--ion-secondary-text-color);font-size:small}.projects-buttons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:.7rem}.business[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{--progress-background: var(--td-blue)}.purple[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{--progress-background: var(--td-magenta)}.progress-container[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}ion-progress-bar[_ngcontent-%COMP%]{flex-grow:0;width:90%;margin-right:10px}.swiper-container[_ngcontent-%COMP%]{width:70%;padding:30px 0;position:relative;margin-left:auto;margin-right:auto}.card-container[_ngcontent-%COMP%]{padding:10px;width:90%;display:block;padding-bottom:10}ion-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:100%;margin:0 auto;border-radius:20px;justify-content:flex-start}@media (max-width: 600px){.card-container[_ngcontent-ng-c3627282167][_ngcontent-%COMP%]{padding:15px;width:90%;display:block;padding-bottom:10}.projects-buttons[_ngcontent-%COMP%], ion-card-content[_ngcontent-%COMP%]{font-size:8px;padding:4px}.task-count[_ngcontent-%COMP%], ion-card-title[_ngcontent-%COMP%]{font-size:10px}ion-progress-bar[_ngcontent-%COMP%]{height:2px;margin-top:2px}.swiper-container[_ngcontent-%COMP%]{width:90%;padding:30px 0;position:relative;margin-left:auto;margin-right:auto}}@media (min-width: 992px){.button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.seeAll-button[_ngcontent-%COMP%]{position:fixed;top:36%;right:20px;transform:translateY(-50%);border-radius:5px;z-index:999}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}}@media (min-width: 992px) and (max-width: 767px){.center[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}@media (min-width: 992px){.progress-container[_ngcontent-%COMP%]{width:85VH}ion-progress-bar[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}}  .swiper-button-prev:after,   .swiper-button-next:after{display:none;font-size:20px;padding-bottom:160px}  .swiper-pagination{position:relative}  .swiper-horizontal>.swiper-pagination-bullets, .swiper-pagination-bullets.swiper-pagination-horizontal[_ngcontent-%COMP%], .swiper-pagination-custom[_ngcontent-%COMP%], .swiper-pagination-fraction[_ngcontent-%COMP%]{top:160px;left:0;width:100%;bottom:0}@media (min-width: 500px){  .swiper-button-prev:after,   .swiper-button-next:after{display:block!important;font-size:25px}  .swiper-horizontal>.swiper-pagination-bullets, .swiper-pagination-bullets.swiper-pagination-horizontal[_ngcontent-%COMP%], .swiper-pagination-custom[_ngcontent-%COMP%], .swiper-pagination-fraction[_ngcontent-%COMP%]{top:200px;left:0;width:100%;bottom:0}}#popover-button[_ngcontent-%COMP%]{position:fixed;bottom:80px;right:20px;font-size:x-large}@media (min-width: 601px){#popover-button[_ngcontent-%COMP%]{display:none}}@media (max-width: 601px){#add-buttons[_ngcontent-%COMP%]{display:none}}ion-icon[_ngcontent-%COMP%]{vertical-align:middle}ion-list[_ngcontent-%COMP%]{background-color:var(--ion-background-color, --td-bg);padding-top:70px;border-width:none;position:relative}ion-item[_ngcontent-%COMP%]{--ion-item-background:var(--ion-background-color, --td-bg);--ripple-color:transparent;--background-activated:transparent;position:relative;display:flex;align-items:center}ion-label[_ngcontent-%COMP%]{background-color:var(--ion-background-color, --td-bg);position:relative}ion-checkbox[_ngcontent-%COMP%]{--border-radius: 5px;--border-color: gray;--border-width: 1px;position:relative;size:large}.container-item[_ngcontent-%COMP%], .swiper-and-text-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative}.todays-tasks-header[_ngcontent-%COMP%]{margin-top:280px;margin-left:5px;position:absolute;white-space:nowrap;z-index:2}@media (max-width: 601px){.todays-tasks-header[_ngcontent-%COMP%]{margin-top:210px}}.completed-task[_ngcontent-%COMP%]{text-decoration:line-through}']}),m})(),canActivate:[i(5444).w]}];let $=(()=>{var a;class m{}return(a=m).\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.a4G({type:a}),a.\u0275inj=t.s3X({imports:[g.qQ.forChild(j),g.qQ]}),m})(),U=(()=>{var a;class m{}return(a=m).\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.a4G({type:a}),a.\u0275inj=t.s3X({imports:[u.MD,f.y,r.wZ,$,r.wZ,d.Kw]}),m})()},5359:(P,_,i)=>{i.d(_,{o:()=>d});var u=i(9212),r=i(4496),f=i(7048);let d=(()=>{var g;class b{constructor(s){this.http=s,this.baseUrl="https://taskflowapp.azurewebsites.net"}register(s){return this.http.post(`${this.baseUrl}/user/register`,s,{withCredentials:!0})}registerByAdmin(s){return this.http.post(`${this.baseUrl}/user/registerByAdmin`,s,{withCredentials:!0})}login(s){return this.http.post(`${this.baseUrl}/user/login`,s,{withCredentials:!0}).pipe((0,u.y)(p=>{localStorage.setItem("username",p.firstName),localStorage.setItem("role",p.role)}))}logout(){return this.http.post(`${this.baseUrl}/user/logout`,{},{withCredentials:!0}).pipe((0,u.y)(()=>{localStorage.removeItem("username"),localStorage.removeItem("role")}))}isLoggedIn(){return!!localStorage.getItem("username")}isUserAdmin(){return"admin"===localStorage.getItem("role")}}return(g=b).\u0275fac=function(s){return new(s||g)(r.CoB(f.KK))},g.\u0275prov=r.wxM({token:g,factory:g.\u0275fac,providedIn:"root"}),b})()},3492:(P,_,i)=>{i.d(_,{U:()=>f});var u=i(4496),r=i(7048);let f=(()=>{var d;class g{constructor(o){this.http=o,this.baseUrl="https://taskflowapp.azurewebsites.net/projects"}getUserProjects(){return this.http.get(`${this.baseUrl}/userProjects`,{withCredentials:!0})}getAssignedProjects(){return this.http.get(`${this.baseUrl}/assignedProjects`,{withCredentials:!0})}getUserProjectMembers(o){return this.http.get(`${this.baseUrl}/${o}/members`,{withCredentials:!0})}getOverdueTasks(o){return this.http.get(`${this.baseUrl}/${o}/overdue-tasks`)}getProjectById(o){return this.http.get(`${this.baseUrl}/get/${o}`,{withCredentials:!0})}deleteProject(o){return this.http.delete(`${this.baseUrl}/delete/${o}`,{withCredentials:!0})}updateProject(o){return this.http.put(`${this.baseUrl}/update/${o.id}`,o,{withCredentials:!0})}getTasksForUserProjectDueToday(o,s){return this.http.get(`${this.baseUrl}/tasks/user/${o}/project/${s}/dueToday`)}deleteUserFromProject(o,s){return this.http.delete(`${this.baseUrl}/${o}/deleteUser/${s}`,{withCredentials:!0})}}return(d=g).\u0275fac=function(o){return new(o||d)(u.CoB(r.KK))},d.\u0275prov=u.wxM({token:d,factory:d.\u0275fac,providedIn:"root"}),g})()},9448:(P,_,i)=>{i.d(_,{K:()=>f});var u=i(7048),r=i(4496);let f=(()=>{var d;class g{constructor(o){this.http=o,this.baseUrl="https://taskflowapp.azurewebsites.net/tasks"}addTask(o){return this.http.post(`${this.baseUrl}/create`,o)}getTasksByUserAndProject(o,s){return this.http.get(`${this.baseUrl}/user/${o}/project/${s}`)}getTodayTasksByProject(o){const p=new u.UD;return p.append("Content-Type","application/json"),this.http.get(`${this.baseUrl}/project/${o}/today`,{headers:p,withCredentials:!0})}getAllTasksByProject(o){const p=new u.UD;return p.append("Content-Type","application/json"),this.http.get(`${this.baseUrl}/project/${o}/all-tasks`,{headers:p,withCredentials:!0})}getAllTasksByProjectAdmin(o){const p={headers:new u.UD({"Content-Type":"application/json"}),withCredentials:!0};return this.http.get(`${this.baseUrl}/project/${o}/all-tasks-admin`,p)}updateTaskStatus(o,s){const p={status:s};return console.log("Sending payload:",JSON.stringify(p)),this.http.put(`${this.baseUrl}/update-status/${o}`,p,{headers:new u.UD({"Content-Type":"application/json"})})}archiveAndDeleteCompletedTasks(){return this.http.post(`${this.baseUrl}/archive-and-delete-completed-tasks`,{})}}return(d=g).\u0275fac=function(o){return new(o||d)(r.CoB(u.KK))},d.\u0275prov=r.wxM({token:d,factory:d.\u0275fac,providedIn:"root"}),g})()}}]);