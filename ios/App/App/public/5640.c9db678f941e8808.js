"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5640],{6400:(L,M,p)=>{p.d(M,{C_:()=>B,w8:()=>W});var l=p(1528);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var i=function(o){return o.Unimplemented="UNIMPLEMENTED",o.Unavailable="UNAVAILABLE",o}(i||{});class h extends Error{constructor(t,n,s){super(t),this.message=t,this.code=n,this.data=s}}const Q=o=>{var t,n,s,u,c;const f=o.CapacitorCustomPlatform||null,m=o.Capacitor||{},w=m.Plugins=m.Plugins||{},C=o.CapacitorPlatforms,Y=(null===(t=null==C?void 0:C.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==f?f.name:(o=>{var t,n;return null!=o&&o.androidBridge?"android":null!==(n=null===(t=null==o?void 0:o.webkit)||void 0===t?void 0:t.messageHandlers)&&void 0!==n&&n.bridge?"ios":"web"})(o)),de=(null===(n=null==C?void 0:C.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==Y()),me=(null===(s=null==C?void 0:C.currentPlatform)||void 0===s?void 0:s.isPluginAvailable)||(k=>{const b=ee.get(k);return!!(null!=b&&b.platforms.has(Y())||ae(k))}),ae=(null===(u=null==C?void 0:C.currentPlatform)||void 0===u?void 0:u.getPluginHeader)||(k=>{var b;return null===(b=m.PluginHeaders)||void 0===b?void 0:b.find(F=>F.name===k)}),ee=new Map,_e=(null===(c=null==C?void 0:C.currentPlatform)||void 0===c?void 0:c.registerPlugin)||((k,b={})=>{const F=ee.get(k);if(F)return console.warn(`Capacitor plugin "${k}" already registered. Cannot register plugins twice.`),F.proxy;const S=Y(),K=ae(k);let D;const Ce=function(){var P=(0,l.c)(function*(){return!D&&S in b?D=D="function"==typeof b[S]?yield b[S]():b[S]:null!==f&&!D&&"web"in b&&(D=D="function"==typeof b.web?yield b.web():b.web),D});return function(){return P.apply(this,arguments)}}(),te=P=>{let E;const O=(...R)=>{const G=Ce().then(I=>{const A=((P,E)=>{var O,R;if(!K){if(P)return null===(R=P[E])||void 0===R?void 0:R.bind(P);throw new h(`"${k}" plugin is not implemented on ${S}`,i.Unimplemented)}{const G=null==K?void 0:K.methods.find(I=>E===I.name);if(G)return"promise"===G.rtype?I=>m.nativePromise(k,E.toString(),I):(I,A)=>m.nativeCallback(k,E.toString(),I,A);if(P)return null===(O=P[E])||void 0===O?void 0:O.bind(P)}})(I,P);if(A){const J=A(...R);return E=null==J?void 0:J.remove,J}throw new h(`"${k}.${P}()" is not implemented on ${S}`,i.Unimplemented)});return"addListener"===P&&(G.remove=(0,l.c)(function*(){return E()})),G};return O.toString=()=>`${P.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:P,writable:!1,configurable:!1}),O},le=te("addListener"),ce=te("removeListener"),ke=(P,E)=>{const O=le({eventName:P},E),R=function(){var I=(0,l.c)(function*(){const A=yield O;ce({eventName:P,callbackId:A},E)});return function(){return I.apply(this,arguments)}}(),G=new Promise(I=>O.then(()=>I({remove:R})));return G.remove=(0,l.c)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield R()}),G},oe=new Proxy({},{get(P,E){switch(E){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return K?ke:le;case"removeListener":return ce;default:return te(E)}}});return w[k]=oe,ee.set(k,{name:k,proxy:oe,platforms:new Set([...Object.keys(b),...K?[S]:[]])}),oe});return m.convertFileSrc||(m.convertFileSrc=k=>k),m.getPlatform=Y,m.handleError=k=>o.console.error(k),m.isNativePlatform=de,m.isPluginAvailable=me,m.pluginMethodNoop=(k,b,F)=>Promise.reject(`${F} does not have an implementation of "${b}".`),m.registerPlugin=_e,m.Exception=h,m.DEBUG=!!m.DEBUG,m.isLoggingEnabled=!!m.isLoggingEnabled,m.platform=m.getPlatform(),m.isNative=m.isNativePlatform(),m},U=(o=>o.Capacitor=Q(o))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),B=U.registerPlugin;class W{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){var s=this;let u=!1;this.listeners[t]||(this.listeners[t]=[],u=!0),this.listeners[t].push(n);const f=this.windowListeners[t];f&&!f.registered&&this.addWindowListener(f),u&&this.sendRetainedArgumentsForEvent(t);const m=function(){var C=(0,l.c)(function*(){return s.removeListener(t,n)});return function(){return C.apply(this,arguments)}}();return Promise.resolve({remove:m})}removeAllListeners(){var t=this;return(0,l.c)(function*(){t.listeners={};for(const n in t.windowListeners)t.removeWindowListener(t.windowListeners[n]);t.windowListeners={}})()}notifyListeners(t,n,s){const u=this.listeners[t];if(u)u.forEach(c=>c(n));else if(s){let c=this.retainedEventArguments[t];c||(c=[]),c.push(n),this.retainedEventArguments[t]=c}}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(t="not implemented"){return new U.Exception(t,i.Unimplemented)}unavailable(t="not available"){return new U.Exception(t,i.Unavailable)}removeListener(t,n){var s=this;return(0,l.c)(function*(){const u=s.listeners[t];if(!u)return;const c=u.indexOf(n);s.listeners[t].splice(c,1),s.listeners[t].length||s.removeWindowListener(s.windowListeners[t])})()}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(s=>{this.notifyListeners(t,s)}))}}const H=o=>encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),z=o=>o.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class V extends W{getCookies(){return(0,l.c)(function*(){const t=document.cookie,n={};return t.split(";").forEach(s=>{if(s.length<=0)return;let[u,c]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");u=z(u).trim(),c=z(c).trim(),n[u]=c}),n})()}setCookie(t){return(0,l.c)(function*(){try{const n=H(t.key),s=H(t.value),u=`; expires=${(t.expires||"").replace("expires=","")}`,c=(t.path||"/").replace("path=",""),f=null!=t.url&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${s||""}${u}; path=${c}; ${f};`}catch(n){return Promise.reject(n)}})()}deleteCookie(t){return(0,l.c)(function*(){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}})()}clearCookies(){return(0,l.c)(function*(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(t){return Promise.reject(t)}})()}clearAllCookies(){var t=this;return(0,l.c)(function*(){try{yield t.clearCookies()}catch(n){return Promise.reject(n)}})()}}B("CapacitorCookies",{web:()=>new V});const q=function(){var o=(0,l.c)(function*(t){return new Promise((n,s)=>{const u=new FileReader;u.onload=()=>{const c=u.result;n(c.indexOf(",")>=0?c.split(",")[1]:c)},u.onerror=c=>s(c),u.readAsDataURL(t)})});return function(n){return o.apply(this,arguments)}}();class a extends W{request(t){return(0,l.c)(function*(){const n=((o,t={})=>{const n=Object.assign({method:o.method||"GET",headers:o.headers},t),u=((o={})=>{const t=Object.keys(o);return Object.keys(o).map(u=>u.toLocaleLowerCase()).reduce((u,c,f)=>(u[c]=o[t[f]],u),{})})(o.headers)["content-type"]||"";if("string"==typeof o.data)n.body=o.data;else if(u.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[f,m]of Object.entries(o.data||{}))c.set(f,m);n.body=c.toString()}else if(u.includes("multipart/form-data")||o.data instanceof FormData){const c=new FormData;if(o.data instanceof FormData)o.data.forEach((m,w)=>{c.append(w,m)});else for(const m of Object.keys(o.data))c.append(m,o.data[m]);n.body=c;const f=new Headers(n.headers);f.delete("content-type"),n.headers=f}else(u.includes("application/json")||"object"==typeof o.data)&&(n.body=JSON.stringify(o.data));return n})(t,t.webFetchExtra),s=((o,t=!0)=>o?Object.entries(o).reduce((s,u)=>{const[c,f]=u;let m,w;return Array.isArray(f)?(w="",f.forEach(C=>{m=t?encodeURIComponent(C):C,w+=`${c}=${m}&`}),w.slice(0,-1)):(m=t?encodeURIComponent(f):f,w=`${c}=${m}`),`${s}&${w}`},"").substr(1):null)(t.params,t.shouldEncodeUrlParams),u=s?`${t.url}?${s}`:t.url,c=yield fetch(u,n),f=c.headers.get("content-type")||"";let w,C,{responseType:m="text"}=c.ok?t:{};switch(f.includes("application/json")&&(m="json"),m){case"arraybuffer":case"blob":C=yield c.blob(),w=yield q(C);break;case"json":w=yield c.json();break;default:w=yield c.text()}const N={};return c.headers.forEach((Y,Z)=>{N[Z]=Y}),{data:w,headers:N,status:c.status,url:c.url}})()}get(t){var n=this;return(0,l.c)(function*(){return n.request(Object.assign(Object.assign({},t),{method:"GET"}))})()}post(t){var n=this;return(0,l.c)(function*(){return n.request(Object.assign(Object.assign({},t),{method:"POST"}))})()}put(t){var n=this;return(0,l.c)(function*(){return n.request(Object.assign(Object.assign({},t),{method:"PUT"}))})()}patch(t){var n=this;return(0,l.c)(function*(){return n.request(Object.assign(Object.assign({},t),{method:"PATCH"}))})()}delete(t){var n=this;return(0,l.c)(function*(){return n.request(Object.assign(Object.assign({},t),{method:"DELETE"}))})()}}B("CapacitorHttp",{web:()=>new a})},8476:(L,M,p)=>{p.d(M,{KO:()=>y,au:()=>l});var l=function(g){return g.Heavy="HEAVY",g.Medium="MEDIUM",g.Light="LIGHT",g}(l||{}),y=function(g){return g.Success="SUCCESS",g.Warning="WARNING",g.Error="ERROR",g}(y||{})},812:(L,M,p)=>{p.d(M,{a:()=>X});var l=p(1528),y=p(4708),T=p(7048),_=p(6400),g=p(8476);const j=(0,_.C_)("Haptics",{web:()=>p.e(8296).then(p.bind(p,8296)).then(d=>new d.HapticsWeb)});var e=p(4496),i=p(9548),h=p(9448),$=p(4716);let Q=(()=>{var d;class v{constructor(r,o){this.modalController=r,this.taskService=o,this.taskName="",this.description="",this.deadline=""}hapticsImpactMedium(){return(0,l.c)(function*(){yield j.impact({style:g.au.Medium})})()}hapticsImpactLight(){return(0,l.c)(function*(){yield j.impact({style:g.au.Light})})()}hapticsVibrate(){return(0,l.c)(function*(){yield j.vibrate()})()}hapticsSelectionStart(){return(0,l.c)(function*(){yield j.selectionStart()})()}hapticsSelectionChanged(){return(0,l.c)(function*(){yield j.selectionChanged()})()}hapticsSelectionEnd(){return(0,l.c)(function*(){yield j.selectionEnd()})()}dismissModal(){this.modalController.dismiss(),this.onModalDismiss()}addTask(){var r=this;return(0,l.c)(function*(){const o={taskName:r.taskName,description:r.description,projectId:r.projectId,assignedUserId:r.userId,deadline:new Date(r.deadline),status:"false"};try{const t=yield r.taskService.addTask(o).toPromise();t instanceof T.WA?(console.log("Task added successfully:",t.body),yield r.hapticsImpactMedium()):(console.error("Unexpected response:",t),yield r.hapticsImpactLight())}catch(t){console.error("Error adding task:",t),yield r.hapticsImpactLight()}finally{r.dismissModal()}})()}}return(d=v).\u0275fac=function(r){return new(r||d)(e.GI1(i.qS),e.GI1(h.K))},d.\u0275cmp=e.In1({type:d,selectors:[["app-new-task-modal"]],inputs:{userId:"userId",projectId:"projectId",onModalDismiss:"onModalDismiss"},decls:15,vars:3,consts:[[3,"click"],["name","chevron-back-outline"],["labelPlacement","floating","label","Task name",3,"ngModel","ngModelChange"],["labelPlacement","floating","label","Task description",3,"ngModel","ngModelChange"],["position","floating"],["min","2024-05-05T00:00:00","max","2024-12-31T23:59:59",1,"ion-padding-vertical",3,"ngModel","ngModelChange"],["expand","block",3,"click"]],template:function(r,o){1&r&&(e.I0R(0,"ion-header")(1,"ion-toolbar")(2,"ion-button",0),e.qCj("click",function(){return o.dismissModal()}),e.wR5(3,"ion-icon",1),e.C$Y()()(),e.I0R(4,"ion-content")(5,"ion-item")(6,"ion-input",2),e.iHE("ngModelChange",function(n){return e.kNx(o.taskName,n)||(o.taskName=n),n}),e.C$Y()(),e.I0R(7,"ion-item")(8,"ion-input",3),e.iHE("ngModelChange",function(n){return e.kNx(o.description,n)||(o.description=n),n}),e.C$Y()(),e.I0R(9,"ion-item")(10,"ion-label",4),e.OEk(11,"Deadline"),e.C$Y(),e.I0R(12,"ion-datetime",5),e.iHE("ngModelChange",function(n){return e.kNx(o.deadline,n)||(o.deadline=n),n}),e.C$Y()(),e.I0R(13,"ion-button",6),e.qCj("click",function(){return o.addTask()}),e.OEk(14,"Add Task"),e.C$Y()()),2&r&&(e.yG2(6),e.OKB("ngModel",o.taskName),e.yG2(2),e.OKB("ngModel",o.description),e.yG2(4),e.OKB("ngModel",o.deadline))},dependencies:[$.ue,$._G,i.sn,i._i,i.on,i.wB,i.Ko,i.A5,i.Yb,i.QR,i.Md,i.IT,i.qG],encapsulation:2}),v})();var x=p(1368);const U=d=>({"completed-task":d});function B(d,v){if(1&d){const a=e.KQA();e.I0R(0,"ion-item")(1,"ion-checkbox",14),e.qCj("click",function(o){const n=e.usT(a).$implicit,s=e.GaO();return e.CGJ(s.playCheckboxAnimation(o,n))}),e.C$Y(),e.I0R(2,"ion-label",15),e.OEk(3),e.C$Y()()}if(2&d){const a=v.$implicit;e.yG2(),e.E7m("checked","completed"===a.status),e.yG2(),e.E7m("ngClass",e.S45(3,U,"completed"===a.status)),e.yG2(),e.oRS(" ",a.taskName," ")}}function ne(d,v){if(1&d){const a=e.KQA();e.I0R(0,"ion-item")(1,"ion-checkbox",14),e.qCj("click",function(o){const n=e.usT(a).$implicit,s=e.GaO();return e.CGJ(s.playCheckboxAnimation(o,n))}),e.C$Y(),e.I0R(2,"ion-label",15),e.OEk(3),e.C$Y()()}if(2&d){const a=v.$implicit;e.yG2(),e.E7m("checked","completed"===a.status),e.yG2(),e.E7m("ngClass",e.S45(3,U,"completed"===a.status)),e.yG2(),e.oRS(" ",a.taskName," ")}}let re=(()=>{var d;class v{constructor(r,o){this.modalController=r,this.taskService=o,this.overdueTasks=[],this.toDoTasks=[],this.tasks=[]}ngOnInit(){this.loadTasks(this.user.id,this.projectId)}playCheckboxAnimation(r,o){console.log(r);const t="completed"===o.status?"not completed":"completed";this.taskService.updateTaskStatus(o.id,t).subscribe({next:()=>{o.status=t,(0,y.U6)("").addElement(r.srcElement).easing("cubic-bezier(0, 0.55, 0.45, 1)").duration(500).fromTo("transform","rotate(0)","rotate(360deg)").play()},error:n=>console.error("Failed to update task status:",n)})}cancel(){this.modalController.dismiss(null,"cancel"),this.onModalDismiss()}openNewTaskModal(){var r=this;return(0,l.c)(function*(){return yield(yield r.modalController.create({component:Q,componentProps:{userId:r.user.id,projectId:r.projectId,onModalDismiss:()=>r.loadTasks(r.user.id,r.projectId)}})).present()})()}loadTasks(r,o){this.taskService.getTasksByUserAndProject(r,o).subscribe({next:t=>{console.log("Tasks:",t),this.overdueTasks=[],this.toDoTasks=[],t.forEach(n=>{this.isTaskOverdue(n)&&this.overdueTasks.push(n),this.toDoTasks.push(n)}),console.log("ToDo Tasks:",this.toDoTasks),console.log("Overdue Tasks:",this.overdueTasks)},error:t=>{console.error("Error retrieving tasks:",t)}})}isTaskOverdue(r){return new Date(r.deadline)<new Date}}return(d=v).\u0275fac=function(r){return new(r||d)(e.GI1(i.qS),e.GI1(h.K))},d.\u0275cmp=e.In1({type:d,selectors:[["app-user-profile-modal"]],inputs:{user:"user",projectId:"projectId",overdueTasks:"overdueTasks",onModalDismiss:"onModalDismiss"},decls:26,vars:6,consts:[[3,"click"],["name","chevron-back-outline"],["lines","none",2,"justify-content","center","display","flex","align-items","center"],["aria-hidden","true"],["src","https://ionicframework.com/docs/img/demos/avatar.svg","alt","Avatar"],[1,"ion-padding-vertical",2,"color","#243158","font-size","large","font-weight","600"],["lines","none"],[2,"font-weight","600"],[1,"ion-padding-horizontal",3,"inset"],[4,"ngFor","ngForOf"],[1,"fab-container"],["vertical","bottom","horizontal","center","mode","ios",3,"click"],["name","add"],[1,"text-below-fab"],["slot","start",3,"checked","click"],[3,"ngClass"]],template:function(r,o){1&r&&(e.I0R(0,"ion-toolbar")(1,"ion-button",0),e.qCj("click",function(){return o.cancel()}),e.wR5(2,"ion-icon",1),e.C$Y()(),e.I0R(3,"ion-content")(4,"ion-item",2)(5,"ion-avatar",3),e.wR5(6,"img",4),e.C$Y(),e.I0R(7,"ion-label",5),e.OEk(8),e.C$Y()(),e.I0R(9,"ion-item",6)(10,"ion-label")(11,"h2",7),e.OEk(12,"To do"),e.C$Y()()(),e.I0R(13,"ion-list",8),e.yuY(14,B,4,5,"ion-item",9),e.C$Y(),e.I0R(15,"ion-item",6)(16,"ion-label")(17,"h2",7),e.OEk(18,"Overdue assignments"),e.C$Y()()(),e.I0R(19,"ion-list",8),e.yuY(20,ne,4,5,"ion-item",9),e.C$Y(),e.I0R(21,"div",10)(22,"ion-fab-button",11),e.qCj("click",function(){return o.openNewTaskModal()}),e.wR5(23,"ion-icon",12),e.C$Y(),e.I0R(24,"div",13),e.OEk(25,"Add new task"),e.C$Y()()()),2&r&&(e.yG2(8),e.CAO(" ",o.user.firstName," ",o.user.lastName," "),e.yG2(5),e.E7m("inset",!0),e.yG2(),e.E7m("ngForOf",o.toDoTasks),e.yG2(5),e.E7m("inset",!0),e.yG2(),e.E7m("ngForOf",o.overdueTasks))},dependencies:[x.QF,x.ay,i.O7,i.sn,i.ew,i._i,i.Wq,i.Ko,i.Yb,i.QR,i.OC,i.Md,i.UJ],styles:["ion-checkbox[_ngcontent-%COMP%]{--border-radius: 5px;--border-color: gray;--border-width: 1px}.fab-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;padding:10px 0;flex-direction:column;margin-top:40px}.text-below-fab[_ngcontent-%COMP%]{text-align:center;padding:10px 0;text-transform:uppercase;letter-spacing:.5px;color:var(--ion-secondary-text-color)}.completed-task[_ngcontent-%COMP%]{text-decoration:line-through}"]}),v})();var W=p(3492);function ie(d,v){if(1&d){const a=e.KQA();e.SAx(0),e.I0R(1,"ion-item")(2,"ion-label",9),e.OEk(3,"Title"),e.C$Y(),e.I0R(4,"ion-input",10),e.iHE("ngModelChange",function(o){e.usT(a);const t=e.GaO();return e.kNx(t.editableProject.projectName,o)||(t.editableProject.projectName=o),e.CGJ(o)}),e.C$Y()(),e.I0R(5,"ion-item")(6,"ion-label",9),e.OEk(7,"Description"),e.C$Y(),e.I0R(8,"ion-textarea",10),e.iHE("ngModelChange",function(o){e.usT(a);const t=e.GaO();return e.kNx(t.editableProject.description,o)||(t.editableProject.description=o),e.CGJ(o)}),e.C$Y()(),e.I0R(9,"ion-item")(10,"ion-label",9),e.OEk(11,"Deadline"),e.C$Y(),e.I0R(12,"ion-datetime",10),e.iHE("ngModelChange",function(o){e.usT(a);const t=e.GaO();return e.kNx(t.editableProject.deadline,o)||(t.editableProject.deadline=o),e.CGJ(o)}),e.C$Y()(),e.I0R(13,"ion-button",11),e.qCj("click",function(){e.usT(a);const o=e.GaO();return e.CGJ(o.saveProject())}),e.OEk(14,"Save"),e.C$Y(),e.k70()}if(2&d){const a=e.GaO();e.yG2(4),e.OKB("ngModel",a.editableProject.projectName),e.yG2(4),e.OKB("ngModel",a.editableProject.description),e.yG2(4),e.OKB("ngModel",a.editableProject.deadline)}}function H(d,v){if(1&d){const a=e.KQA();e.I0R(0,"ion-content")(1,"ion-list")(2,"ion-item",24),e.qCj("click",function(){e.usT(a);const o=e.GaO().$implicit,t=e.GaO(2);return e.CGJ(t.openProfileModal(o))}),e.OEk(3,"See profile"),e.C$Y(),e.I0R(4,"ion-item",24),e.qCj("click",function(){e.usT(a);const o=e.GaO().$implicit,t=e.GaO(2);return e.CGJ(t.deleteUserFromProject(o))}),e.OEk(5,"Delete"),e.C$Y()()()}2&d&&(e.yG2(2),e.E7m("button",!0)("detail",!1),e.yG2(2),e.E7m("button",!0)("detail",!1))}function z(d,v){if(1&d){const a=e.KQA();e.I0R(0,"ion-item-sliding")(1,"ion-item")(2,"ion-avatar",16),e.wR5(3,"img",17),e.C$Y(),e.I0R(4,"ion-label"),e.OEk(5),e.C$Y(),e.I0R(6,"ion-button",18),e.wR5(7,"ion-icon",19),e.C$Y(),e.I0R(8,"ion-popover",20),e.yuY(9,H,6,4,"ng-template"),e.C$Y()(),e.I0R(10,"ion-item-options",21)(11,"ion-item-options",21)(12,"ion-item-option",22),e.qCj("click",function(){const t=e.usT(a).$implicit,n=e.GaO(2);return e.CGJ(n.deleteUserFromProject(t))}),e.wR5(13,"ion-icon",23),e.C$Y()()()()}if(2&d){const a=v.$implicit,r=v.index;e.yG2(5),e.CAO(" ",a.firstName," ",a.lastName," "),e.yG2(),e.E7m("id","popover-button-"+r),e.yG2(2),e.E7m("trigger","popover-button-"+r)("dismissOnSelect",!0)}}const V=d=>({"completed-task":d});function se(d,v){if(1&d){const a=e.KQA();e.I0R(0,"ion-item")(1,"ion-checkbox",25),e.qCj("click",function(o){const n=e.usT(a).$implicit,s=e.GaO(2);return e.CGJ(s.playCheckboxAnimation(o,n))}),e.C$Y(),e.I0R(2,"ion-label",26),e.OEk(3),e.C$Y()()}if(2&d){const a=v.$implicit;e.yG2(),e.E7m("checked","completed"===a.status),e.yG2(),e.E7m("ngClass",e.S45(3,V,"completed"===a.status)),e.yG2(),e.oRS(" ",a.taskName," ")}}function q(d,v){if(1&d&&(e.I0R(0,"ion-item")(1,"ion-label")(2,"h2"),e.OEk(3,"Title"),e.C$Y(),e.I0R(4,"p"),e.OEk(5),e.C$Y()()(),e.I0R(6,"ion-item")(7,"ion-label")(8,"h2"),e.OEk(9,"Description"),e.C$Y(),e.I0R(10,"p"),e.OEk(11),e.C$Y()()(),e.I0R(12,"ion-item")(13,"ion-label")(14,"h2"),e.OEk(15,"Deadline"),e.C$Y(),e.I0R(16,"p"),e.OEk(17),e.wVc(18,"date"),e.C$Y(),e.I0R(19,"p"),e.OEk(20),e.C$Y()()(),e.I0R(21,"ion-list")(22,"ion-list-header",12)(23,"ion-label")(24,"h2"),e.OEk(25,"Members"),e.C$Y()()(),e.yuY(26,z,14,5,"ion-item-sliding",13),e.C$Y(),e.I0R(27,"ion-item",14)(28,"ion-label")(29,"h2"),e.OEk(30,"Overdue assignments"),e.C$Y()()(),e.I0R(31,"ion-list",15),e.yuY(32,se,4,5,"ion-item",13),e.C$Y()),2&d){const a=e.GaO();e.yG2(5),e.cNF(a.project.projectName),e.yG2(6),e.cNF(a.project.description),e.yG2(6),e.cNF(e.g7$(18,7,a.project.deadline,"yyyy-MM-dd")),e.yG2(3),e.oRS("",a.daysUntilDeadline(a.project.deadline)," days left"),e.yG2(6),e.E7m("ngForOf",a.users),e.yG2(5),e.E7m("inset",!0),e.yG2(),e.E7m("ngForOf",a.overdueTasks)}}let X=(()=>{var d;class v{constructor(r,o,t,n){this.projectService=r,this.modalController=o,this.toastController=t,this.taskService=n,this.users=null,this.overdueTasks=null,this.tasks=[],this.isEditing=!1}ngOnInit(){var r=this;return(0,l.c)(function*(){if(r.project&&r.project.id)try{console.log(`Fetching members for project ID: ${r.project.id}`);const o=yield r.projectService.getUserProjectMembers(r.project.id).toPromise();console.log(o),r.users=o;const t=yield r.projectService.getOverdueTasks(r.project.id).toPromise();r.overdueTasks=t}catch(o){console.error("Error fetching project details:",o)}r.editableProject={...r.project}})()}toggleEdit(){this.isEditing=!this.isEditing}cancel(){this.modalController.dismiss(null,"cancel"),this.onModalDismiss()}daysUntilDeadline(r){const o=new Date(r),t=new Date,n=o.getTime()-t.getTime();return Math.ceil(n/864e5)}openProfileModal(r){var o=this;return(0,l.c)(function*(){return yield(yield o.modalController.create({component:re,componentProps:{user:r,projectId:o.project.id,onModalDismiss:()=>o.loadProjectDetails()}})).present()})()}deleteProject(){var r=this;return(0,l.c)(function*(){const o=r.project.id;try{yield r.projectService.deleteProject(o).toPromise(),(yield r.toastController.create({message:"Project deleted successfully!",duration:2e3,color:"success"})).present(),r.modalController.dismiss(null,"delete"),r.onModalDismiss()}catch(t){console.error("Error deleting project:",t),(yield r.toastController.create({message:"Failed to delete project. Please try again later.",duration:2e3,color:"danger"})).present()}})()}deleteUserFromProject(r){var o=this;return(0,l.c)(function*(){const t=o.project.id,n=r.id;try{yield o.projectService.deleteUserFromProject(t,n).toPromise(),(yield o.toastController.create({message:"User and associated tasks deleted successfully!",duration:2e3,color:"success"})).present(),o.loadProjectDetails()}catch(s){console.error("Error deleting user from project:",s),(yield o.toastController.create({message:"Failed to delete user from project. Please try again later.",duration:2e3,color:"danger"})).present()}})()}saveProject(){var r=this;return(0,l.c)(function*(){try{yield r.projectService.updateProject(r.editableProject).toPromise(),r.project={...r.editableProject},r.isEditing=!1,(yield r.toastController.create({message:"Project updated successfully!",duration:2e3,color:"success"})).present()}catch(o){console.error("Error updating project:",o),(yield r.toastController.create({message:"Failed to update project. Please try again later.",duration:2e3,color:"danger"})).present()}})()}playCheckboxAnimation(r,o){console.log(r);const t="completed"===o.status?"not completed":"completed";this.taskService.updateTaskStatus(o.id,t).subscribe({next:()=>{o.status=t,(0,y.U6)("").addElement(r.srcElement).easing("cubic-bezier(0, 0.55, 0.45, 1)").duration(500).fromTo("transform","rotate(0)","rotate(360deg)").play()},error:n=>console.error("Failed to update task status:",n)})}loadProjectDetails(){this.ngOnInit()}}return(d=v).\u0275fac=function(r){return new(r||d)(e.GI1(W.U),e.GI1(i.qS),e.GI1(i.Gq),e.GI1(h.K))},d.\u0275cmp=e.In1({type:d,selectors:[["app-project-details-modal"]],inputs:{project:"project",onModalDismiss:"onModalDismiss"},decls:18,vars:2,consts:[[1,"ion-align-items-center"],["size","auto"],["fill","clear",3,"click"],["name","chevron-back-outline"],["size","large",2,"font-size","24px"],["size","auto",1,"crud-buttons"],[1,"ion-padding"],[4,"ngIf","ngIfElse"],["viewMode",""],["position","floating"],[3,"ngModel","ngModelChange"],["expand","block",3,"click"],[1,"ion-padding-horizontal"],[4,"ngFor","ngForOf"],["lines","none"],[1,"ion-padding-horizontal",3,"inset"],["aria-hidden","true","slot","start"],["alt","","src","https://ionicframework.com/docs/img/demos/avatar.svg"],["fill","clear","slot","end",3,"id"],["name","ellipsis-vertical"],[3,"trigger","dismissOnSelect"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"],[3,"button","detail","click"],["slot","start",3,"checked","click"],[3,"ngClass"]],template:function(r,o){if(1&r&&(e.I0R(0,"ion-toolbar")(1,"ion-row",0)(2,"ion-col",1)(3,"ion-button",2),e.qCj("click",function(){return o.cancel()}),e.wR5(4,"ion-icon",3),e.C$Y()(),e.I0R(5,"ion-col")(6,"ion-title",4),e.OEk(7,"Project Details"),e.C$Y()(),e.I0R(8,"ion-col",5)(9,"ion-buttons")(10,"ion-button",2),e.qCj("click",function(){return o.toggleEdit()}),e.OEk(11," Edit "),e.C$Y(),e.I0R(12,"ion-button",2),e.qCj("click",function(){return o.deleteProject()}),e.OEk(13," Delete "),e.C$Y()()()()(),e.I0R(14,"ion-content",6),e.yuY(15,ie,15,3,"ng-container",7)(16,q,33,10,"ng-template",null,8,e.gJz),e.C$Y()),2&r){const t=e.Gew(17);e.yG2(15),e.E7m("ngIf",o.isEditing)("ngIfElse",t)}},dependencies:[x.QF,x.ay,x.u_,$.ue,$._G,i.O7,i.sn,i.GS,i.ew,i.Kk,i._i,i.on,i.Ko,i.A5,i.Yb,i.uW,i.gf,i.UB,i.QR,i.OC,i.zz,i.qo,i.gP,i.tM,i.Md,i.sW,i.UJ,i.IT,i.qG,x.y],styles:["h2[_ngcontent-%COMP%]{font-weight:600;padding-bottom:10px}ion-checkbox[_ngcontent-%COMP%]{--border-radius: 5px;--border-color: gray;--border-width: 1px}.crud-buttons[_ngcontent-%COMP%]{margin-right:5vh}.completed-task[_ngcontent-%COMP%]{text-decoration:line-through}"]}),v})()},5359:(L,M,p)=>{p.d(M,{o:()=>_});var l=p(9212),y=p(4496),T=p(7048);let _=(()=>{var g;class j{constructor(i){this.http=i,this.baseUrl="https://taskflowapp.azurewebsites.net"}register(i){return this.http.post(`${this.baseUrl}/user/register`,i,{withCredentials:!0})}registerByAdmin(i){return this.http.post(`${this.baseUrl}/user/registerByAdmin`,i,{withCredentials:!0})}login(i){return this.http.post(`${this.baseUrl}/user/login`,i,{withCredentials:!0}).pipe((0,l.y)(h=>{localStorage.setItem("username",h.firstName),localStorage.setItem("role",h.role)}))}logout(){return this.http.post(`${this.baseUrl}/user/logout`,{},{withCredentials:!0}).pipe((0,l.y)(()=>{localStorage.removeItem("username"),localStorage.removeItem("role")}))}isLoggedIn(){return!!localStorage.getItem("username")}isUserAdmin(){return"admin"===localStorage.getItem("role")}}return(g=j).\u0275fac=function(i){return new(i||g)(y.CoB(T.KK))},g.\u0275prov=y.wxM({token:g,factory:g.\u0275fac,providedIn:"root"}),j})()},3492:(L,M,p)=>{p.d(M,{U:()=>T});var l=p(4496),y=p(7048);let T=(()=>{var _;class g{constructor(e){this.http=e,this.baseUrl="https://taskflowapp.azurewebsites.net/projects"}getUserProjects(){return this.http.get(`${this.baseUrl}/userProjects`,{withCredentials:!0})}getAssignedProjects(){return this.http.get(`${this.baseUrl}/assignedProjects`,{withCredentials:!0})}getUserProjectMembers(e){return this.http.get(`${this.baseUrl}/${e}/members`,{withCredentials:!0})}getOverdueTasks(e){return this.http.get(`${this.baseUrl}/${e}/overdue-tasks`)}getProjectById(e){return this.http.get(`${this.baseUrl}/get/${e}`,{withCredentials:!0})}deleteProject(e){return this.http.delete(`${this.baseUrl}/delete/${e}`,{withCredentials:!0})}updateProject(e){return this.http.put(`${this.baseUrl}/update/${e.id}`,e,{withCredentials:!0})}getTasksForUserProjectDueToday(e,i){return this.http.get(`${this.baseUrl}/tasks/user/${e}/project/${i}/dueToday`)}deleteUserFromProject(e,i){return this.http.delete(`${this.baseUrl}/${e}/deleteUser/${i}`,{withCredentials:!0})}}return(_=g).\u0275fac=function(e){return new(e||_)(l.CoB(y.KK))},_.\u0275prov=l.wxM({token:_,factory:_.\u0275fac,providedIn:"root"}),g})()},9448:(L,M,p)=>{p.d(M,{K:()=>T});var l=p(7048),y=p(4496);let T=(()=>{var _;class g{constructor(e){this.http=e,this.baseUrl="https://taskflowapp.azurewebsites.net/tasks"}addTask(e){return this.http.post(`${this.baseUrl}/create`,e)}getTasksByUserAndProject(e,i){return this.http.get(`${this.baseUrl}/user/${e}/project/${i}`)}getTodayTasksByProject(e){const h=new l.UD;return h.append("Content-Type","application/json"),this.http.get(`${this.baseUrl}/project/${e}/today`,{headers:h,withCredentials:!0})}getAllTasksByProject(e){const h=new l.UD;return h.append("Content-Type","application/json"),this.http.get(`${this.baseUrl}/project/${e}/all-tasks`,{headers:h,withCredentials:!0})}getAllTasksByProjectAdmin(e){const h={headers:new l.UD({"Content-Type":"application/json"}),withCredentials:!0};return this.http.get(`${this.baseUrl}/project/${e}/all-tasks-admin`,h)}updateTaskStatus(e,i){const h={status:i};return console.log("Sending payload:",JSON.stringify(h)),this.http.put(`${this.baseUrl}/update-status/${e}`,h,{headers:new l.UD({"Content-Type":"application/json"})})}archiveAndDeleteCompletedTasks(){return this.http.post(`${this.baseUrl}/archive-and-delete-completed-tasks`,{})}}return(_=g).\u0275fac=function(e){return new(e||_)(y.CoB(l.KK))},_.\u0275prov=y.wxM({token:_,factory:_.\u0275fac,providedIn:"root"}),g})()},4548:(L,M,p)=>{p.d(M,{o:()=>_});var l=p(4496),y=p(5359),T=p(8424);let _=(()=>{var g;class j{constructor(i,h){this.authService=i,this.router=h}canActivate(i,h){if(this.authService.isLoggedIn()){if(this.authService.isUserAdmin())return!0;{const $=this.getUserRouteForState(h);return this.router.navigate([$]),!1}}return this.router.navigate(["/login"]),!1}getUserRouteForState(i){return{"/settings-admin":"/settings","/tasks-admin":"/tasks","/admin-homepage":"/home"}[i.url]||"/home"}}return(g=j).\u0275fac=function(i){return new(i||g)(l.CoB(y.o),l.CoB(T.E5))},g.\u0275prov=l.wxM({token:g,factory:g.\u0275fac,providedIn:"root"}),j})()}}]);